<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>Para √† Petit Prix - Vitamines & Compl√©ments Alimentaires</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
    />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"
    />

    <link
      rel="preconnect"
      href="https://fonts.googleapis.com"
    />
    <link
      rel="preconnect"
      href="https://fonts.gstatic.com"
      crossorigin
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
      xintegrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="/css/styles.css"
    />
  </head>
  <body>
    <nav
      class="navbar navbar-expand-lg"
      id="mainNavbar"
    >
      <div class="container">
        <a
          class="navbar-brand"
          href="#"
        >
          <img
            class="logo"
            src="../img/icon-512.png"
            alt=""
          />
          Para Petit Prix
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div
          class="collapse navbar-collapse"
          id="navbarNav"
        >
          <ul class="navbar-nav ms-auto">
            <li class="nav-item text-center">
              <a
                class="nav-link"
                aria-current="page"
                href="../home/"
                >HOME</a
              >
            </li>
            <li class="nav-item text-center">
              <a
                class="nav-link"
                href="/views/cheveux_beaute.html"
                >Soins de la peau & Cosm√©tiques</a
              >
            </li>
            <li class="nav-item text-center">
              <a
                class="nav-link"
                href="/views/cheveux_beaute.html"
                >Cheveux & Beaut√©</a
              >
            </li>
            <li class="nav-item text-center">
              <a
                class="nav-link active"
                href="/views/Vitamines&Compl√©ments-Alimentaires.html"
                >Vitamines & Compl√©ments Alimentaires</a
              >
            </li>
            <li class="nav-item text-center">
              <a
                class="nav-link"
                href="#latest-medicines"
                >Maternit√© & Produits B√©b√©</a
              >
            </li>
            <li class="nav-item text-center">
              <a
                class="nav-link"
                href="#latest-medicines"
                >Hygi√®ne & Soins Personnels</a
              >
            </li>
            <li class="nav-item text-center">
              <a
                class="nav-link"
                href="#latest-medicines"
                >Nutrition & Produits Minceur</a
              >
            </li>
            <li class="nav-item text-center">
              <a
                class="nav-link"
                href="#latest-medicines"
                >Huiles Essentielles & Aromath√©rapie</a
              >
            </li>
            <li class="nav-item text-center">
              <a
                class="nav-link"
                href="#latest-medicines"
                >Appareils & Accessoires Sant√©</a
              >
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <section
      id="latest-medicines"
      class="section-padding bg-light"
    >
      <div class="container">
        <div class="section-title">
          <h2>Vitamines & Compl√©ments Alimentaires</h2>
        </div>
        <div
          class="row"
          id="productList"
        ></div>
      </div>
    </section>

    <footer class="footer">
      <div class="container">
        <div class="row">
          <!-- Pr√©sentation -->
          <div class="col-lg-4 col-md-6 mb-4 mb-lg-0">
            <h5><i class="fas fa-prescription-bottle-medical me-2"></i>Parapharmacie Petit Prix</h5>
            <p class="small">
              Votre partenaire de confiance pour une sant√© et un bien-√™tre optimaux. Nous nous
              engageons √† offrir des soins parapharmaceutiques de qualit√©, des conseils d‚Äôexperts et
              une large gamme de produits de sant√©.
            </p>
          </div>

          <!-- Explorer -->
          <div class="col-lg-2 col-md-6 mb-4 mb-lg-0">
            <h5>Explorer</h5>
            <ul class="list-unstyled">
              <li><a href="#about">√Ä propos</a></li>
              <li><a href="#services">Services</a></li>
              <li><a href="#products">Produits</a></li>
              <li><a href="#latest-medicines">Nouveaut√©s</a></li>
              <li><a href="#offers">Offres</a></li>
            </ul>
          </div>

          <!-- Support -->
          <div class="col-lg-3 col-md-6 mb-4 mb-md-0">
            <h5>Support</h5>
            <ul class="list-unstyled">
              <li><a href="#faq">FAQ</a></li>
              <li><a href="#consultation">Prendre rendez-vous</a></li>
              <li><a href="#contact">Contactez-nous</a></li>
              <li><a href="#">Politique de confidentialit√©</a></li>
              <li><a href="#">Conditions d‚Äôutilisation</a></li>
            </ul>
          </div>

          <!-- R√©seaux sociaux -->
          <div class="col-lg-3 col-md-6">
            <h5>Suivez-nous</h5>
            <p class="small mb-2">
              Restez inform√© de nos actualit√©s et conseils sant√© sur les r√©seaux sociaux.
            </p>
            <div class="social-icons">
              <a
                href="#"
                aria-label="Facebook"
                ><i class="fab fa-facebook-f"></i
              ></a>
              <a
                href="#"
                aria-label="Twitter"
                ><i class="fab fa-twitter"></i
              ></a>
              <a
                href="#"
                aria-label="Instagram"
                ><i class="fab fa-instagram"></i
              ></a>
              <a
                href="#"
                aria-label="LinkedIn"
                ><i class="fab fa-linkedin-in"></i
              ></a>
            </div>
          </div>
        </div>

        <!-- Copyright -->
        <div class="copyright">
          ¬© <span id="currentYear"></span> Parapharmacie Petit Prix. Tous droits r√©serv√©s. Con√ßu
          avec <i class="fas fa-heart text-danger"></i> par
          <a
            href="#"
            target="_blank"
            rel="noopener noreferrer"
          >
            JOSEF UCCEF </a
          >.
        </div>
      </div>
    </footer>

    <!-- ÿ£ŸäŸÇŸàŸÜÿ© ÿßŸÑÿ≥ŸÑÿ© ÿßŸÑÿπÿßÿ¶ŸÖÿ© -->
    <div id="floating-cart">
      <i class="fas fa-shopping-cart"></i>
      <span id="cart-count">0</span>
    </div>

    <!-- ŸÜÿßŸÅÿ∞ÿ© ÿßŸÑÿ≥ŸÑÿ© -->
    <div id="cart-popup">
      <button class="close-btn">&times;</button>
      <h4>üõí Votre Panier</h4>
      <div id="cart-items"></div>
      <div id="cart-total">Total: 0 DH</div>
      <button id="whatsapp-btn">Envoyer via WhatsApp</button>
    </div>
    <script>
      // üõí ÿßŸÑÿ≥ŸÑÿ© ÿßŸÑÿπÿßŸÑŸÖŸäÿ©
      let cart = JSON.parse(localStorage.getItem('cart')) || [];

      const cartIcon = document.getElementById('floating-cart');
      const cartPopup = document.getElementById('cart-popup');
      const closeBtn = document.querySelector('#cart-popup .close-btn');
      const cartCount = document.getElementById('cart-count');
      const cartItemsContainer = document.getElementById('cart-items');
      const cartTotal = document.getElementById('cart-total');
      const whatsappBtn = document.getElementById('whatsapp-btn');

      // ÿ™ÿ≠ÿØŸäÿ´ Ÿàÿßÿ¨Ÿáÿ© ÿßŸÑÿ≥ŸÑÿ© ÿπŸÜÿØ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿµŸÅÿ≠ÿ©
      updateCart();

      // ŸÅÿ™ÿ≠ / ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑÿ≥ŸÑÿ©
      cartIcon.addEventListener('click', () => cartPopup.classList.add('active'));
      closeBtn.addEventListener('click', () => cartPopup.classList.remove('active'));

      // ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ŸÖŸÜ API Ÿàÿπÿ±ÿ∂Ÿáÿß
      async function loadProducts() {
        try {
          const res = await fetch('https://para-petit-prix.vercel.app/api/products');
          const products = await res.json();

          const container = document.getElementById('productList');
          container.innerHTML = '';

          products.forEach((p) => {
            // ‚úÖ ŸÜÿπÿ±ÿ∂ ŸÅŸÇÿ∑ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ŸÑŸä ÿπŸÜÿØŸáÿß visibilit√© = "oui" Ÿà ŸÉÿßÿ™Ÿäÿ¨Ÿàÿ±Ÿä = cheveux_beaute
            if (p.visibility !== 'oui' || p.category !== 'Vitamines & Compl√©ments Alimentaires')
              return;

            const card = document.createElement('div');
            card.className = 'col-md-6 col-lg-3 mb-4';

            const imageUrl =
              p.image && p.image.trim() !== ''
                ? p.image
                : 'https://i.postimg.cc/MTVhPR2k/Logo-Wiz-30092025-183434.png';

            card.innerHTML = `
    <div class="medicine-card">
      <img src="${imageUrl}" alt="${p.name}" />
      <div class="card-body">
        <h5 class="card-title">${p.name}</h5>
        <p class="card-text text-muted">${
          p.description && p.description.trim() !== ''
            ? p.description
            : p.category
            ? p.category.replace('_', ' ')
            : 'Sans description'
        }</p>
        <p class="price">${Number(p.price).toFixed(2)} DH</p>
        <p class="stock">Stock : <span>${p.quantity}</span></p>
        <a href="#"
           class="btn btn-outline-primary btn-sm w-100 add-to-cart"
           data-title="${p.name}"
           data-price="${Number(p.price)}"
           data-img="${imageUrl}">
          <i class="fas fa-cart-plus me-2"></i> Ajouter au panier
        </a>
      </div>
    </div>
  `;
            container.appendChild(card);
          });

          // ‚úÖ ÿ±ÿ®ÿ∑ ŸÉŸÑ ÿ≤ÿ± ŸÖÿπ ÿßŸÑÿ≥ŸÑÿ©
          document.querySelectorAll('.add-to-cart').forEach((btn) => {
            btn.addEventListener('click', (e) => {
              e.preventDefault();
              const title = btn.getAttribute('data-title');
              const price = parseFloat(btn.getAttribute('data-price'));
              const imgSrc = btn.getAttribute('data-img');
              addToCart(title, price, imgSrc);
            });
          });
        } catch (err) {
          console.error('Erreur de chargement des produits:', err);
        }
      }

      // üõí ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸÜÿ™ÿ¨ ŸÑŸÑÿ≥ŸÑÿ©
      function addToCart(title, price, imgSrc) {
        const existing = cart.find((item) => item.title === title);
        if (existing) {
          existing.qty++;
        } else {
          cart.push({ title, price, qty: 1, imgSrc });
        }

        // ÿ≠ŸÅÿ∏ ÿßŸÑÿ≥ŸÑÿ© ŸÅŸä localStorage
        localStorage.setItem('cart', JSON.stringify(cart));

        // ÿ™ÿ≠ÿØŸäÿ´ Ÿàÿßÿ¨Ÿáÿ© ÿßŸÑÿ≥ŸÑÿ©
        updateCart();
      }

      // ÿ™ÿ≠ÿØŸäÿ´ Ÿàÿßÿ¨Ÿáÿ© ÿßŸÑÿ≥ŸÑÿ©
      function updateCart() {
        cartCount.innerText = cart.reduce((acc, item) => acc + item.qty, 0);
        cartItemsContainer.innerHTML = '';

        cart.forEach((item, index) => {
          const div = document.createElement('div');
          div.className = 'cart-item d-flex align-items-center mb-2';
          div.innerHTML = `
        <img src="${item.imgSrc}" alt="${
          item.title
        }" style="width:60px; height:60px; object-fit:cover; margin-right:10px;">
        <div class="cart-item-details flex-grow-1">
          <span>${item.title} x${item.qty}</span><br>
          <span>${(item.price * item.qty).toFixed(2)} DH</span>
        </div>
        <button data-index="${index}" class="btn btn-sm btn-danger">&times;</button>
      `;
          cartItemsContainer.appendChild(div);

          div.querySelector('button').addEventListener('click', () => {
            cart.splice(index, 1);
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCart();
          });
        });

        const total = cart.reduce((acc, item) => acc + item.price * item.qty, 0);
        cartTotal.innerText = `Total: ${total.toFixed(2)} DH`;
      }

      // ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ∑ŸÑÿ® ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®
      whatsappBtn.addEventListener('click', () => {
        if (cart.length === 0) return alert('Votre panier est vide !');
        let message = 'Bonjour, je souhaite commander :%0A';
        cart.forEach((item) => {
          message += `- ${item.title} x${item.qty} : ${(item.price * item.qty).toFixed(2)} DH%0A`;
        });
        const total = cart.reduce((acc, item) => acc + item.price * item.qty, 0);
        message += `Total: ${total.toFixed(2)} DH`;

        const whatsappNumber = '212601862102';
        window.open(`https://wa.me/${whatsappNumber}?text=${message}`, '_blank');
      });

      document.addEventListener('DOMContentLoaded', loadProducts);
    </script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="/js/script.js"></script>
  </body>
</html>
